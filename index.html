<!DOCTYPE html>
<html>
<head>
<title>Drive Mad Embedded</title>
<style>
  #game-container {
    width: 640px; /* Adjust width as needed */
    height: 480px; /* Adjust height as needed */
    border: 1px solid #ccc; /* Optional border for visibility */
    position: relative; /* Required for absolute positioning of the button */
  }
  #fallback-message {
    display: none; /* Initially hidden */
    text-align: center;
    padding: 20px;
    color: #888;
  }
  #fullscreen-button {
    position: absolute;
    top: 10px;
    right: 10px;
    padding: 8px 12px;
    background-color: #337ab7;
    color: white;
    border: none;
    cursor: pointer;
    z-index: 10; /* Make sure the button is above the game */
  }
    #fullscreen-button:hover {
        background-color: #286090;
    }
</style>
</head>
<body>

<div id="game-container">
  <iframe src="https://poki.com/en/g/drive-mad" frameborder="0" scrolling="no" width="100%" height="100%" id="game-iframe"></iframe>
  <button id="fullscreen-button">Fullscreen</button>
</div>

<div id="fallback-message">
  <p>Sorry, the game is temporarily unavailable. Please try again later.</p>
</div>

<script>
  const gameContainer = document.getElementById('game-container');
  const fallbackMessage = document.getElementById('fallback-message');
  const fullscreenButton = document.getElementById('fullscreen-button');
  const gameIframe = document.getElementById('game-iframe');

  //Attempt to embed, otherwise load a fallback message
  
  function isPokiDown() {
     // Attempt to load a simple resource from poki to test if their servers are up.
    return fetch('https://poki.com/api/games')
        .then(response => !response.ok)
        .catch(() => true); // if there is a network error, assume it is down.
  }
    
    isPokiDown()
    .then(isDown =>{
        if (isDown) {
            gameContainer.style.display = 'none';
            fallbackMessage.style.display = 'block';
        }
    })

    
  fullscreenButton.addEventListener('click', () => {
    if (document.fullscreenElement) {
      document.exitFullscreen();
        fullscreenButton.innerText = 'Fullscreen';
    } else {
      gameContainer.requestFullscreen()
        .then(() => {
            fullscreenButton.innerText = 'Exit Fullscreen';
        })
        .catch(err => {
          console.error(`Error attempting to go full screen: ${err}`);
        })
    }
  });
</script>

</body>
</html>
